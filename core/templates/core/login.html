{% extends 'core/base.html' %}
{% load static %}
{% block title %}Login{% endblock %}

{% block content %}
<div class="d-flex justify-content-center align-items-center min-vh-100 p-3">
  <div class="card shadow-sm w-100" style="max-width: 400px;">
    <div class="card-header text-center text-black">
      <img src="{% static 'core/img/logo.png' %}" alt="Logo" style="width: 50px; height: 50px;" class="img-fluid">
      <h4 class="mt-2 mb-0">Iniciar Sesión</h4>
    </div>
    
    <!-- Incluir el componente del formulario -->
    {% include 'core/components/_login_form.html' %}
  </div>
</div>
{% endblock %}

{% block scripts %}
<script>
  function showMessage(message, type = 'warning') {
    const container = document.getElementById('messageContainer');
    container.textContent = message;
    container.className = 'alert alert-' + type;
    container.classList.remove('d-none');

    setTimeout(() => {
      container.classList.add('d-none');
    }, 5000);
  }

  function login(event) {
    event.preventDefault();

    const email = document.getElementById('email').value;
    const pass = document.getElementById('password').value;

    auth.signInWithEmailAndPassword(email, pass)
      .then(userCredential => {
        showMessage('¡Inicio de sesión exitoso! Redirigiendo...', 'success');
        setTimeout(() => {
          window.location.href = "/";
        }, 1000);
      })
      .catch(error => {
        showMessage('Error de inicio de sesión: ' + error.message, 'danger');
      });
  }
</script>
{% endblock %}
